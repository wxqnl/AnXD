{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { getDeptTree, addDept, updateDept, deleteDept } from '@/api/dept';\n\n// 表格数据和状态\n\nexport default {\n  __name: 'SysDept',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const deptList = ref([]);\n    const loading = ref(false);\n\n    // 获取部门树\n    const getList = async () => {\n      try {\n        loading.value = true;\n        const res = await getDeptTree();\n        deptList.value = res.data || [];\n      } catch (error) {\n        console.error('获取部门列表失败', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 新增部门\n    const handleAdd = () => {\n      ElMessage.info('新增部门功能待实现');\n    };\n\n    // 编辑部门\n    const handleEdit = row => {\n      ElMessage.info(`编辑部门: ${row.name}`);\n    };\n\n    // 删除部门\n    const handleDelete = row => {\n      ElMessageBox.confirm(`确定要删除部门 ${row.name} 吗?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await deleteDept(row.id);\n          ElMessage.success('删除成功');\n          getList();\n        } catch (error) {\n          ElMessage.error('删除失败');\n        }\n      }).catch(() => {});\n    };\n\n    // 页面加载时获取数据\n    onMounted(() => {\n      getList();\n    });\n    const __returned__ = {\n      deptList,\n      loading,\n      getList,\n      handleAdd,\n      handleEdit,\n      handleDelete,\n      ref,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      get getDeptTree() {\n        return getDeptTree;\n      },\n      get addDept() {\n        return addDept;\n      },\n      get updateDept() {\n        return updateDept;\n      },\n      get deleteDept() {\n        return deleteDept;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","ElMessageBox","getDeptTree","addDept","updateDept","deleteDept","deptList","loading","getList","value","res","data","error","console","handleAdd","info","handleEdit","row","name","handleDelete","confirm","confirmButtonText","cancelButtonText","type","then","id","success","catch"],"sources":["/Users/apple/Desktop/111111/zongheshixi/daijiaguanli/frontui/src/pages/system/SysDept.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card>\n      <template #header>\n        <div class=\"card-header\">\n          <span>部门管理</span>\n          <el-button type=\"primary\" @click=\"handleAdd\">新增部门</el-button>\n        </div>\n      </template>\n      \n      <el-table v-loading=\"loading\" :data=\"deptList\" row-key=\"id\" border :tree-props=\"{ children: 'children' }\">\n        <el-table-column prop=\"name\" label=\"部门名称\" />\n        <el-table-column prop=\"leader\" label=\"负责人\" />\n        <el-table-column prop=\"phone\" label=\"联系电话\" />\n        <el-table-column prop=\"email\" label=\"邮箱\" />\n        <el-table-column prop=\"orderNum\" label=\"排序\" width=\"80\" />\n        <el-table-column prop=\"status\" label=\"状态\" width=\"80\">\n          <template #default=\"scope\">\n            <el-tag :type=\"scope.row.status === 1 ? 'success' : 'danger'\">\n              {{ scope.row.status === 1 ? '正常' : '停用' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"200\">\n          <template #default=\"scope\">\n            <el-button type=\"primary\" link @click=\"handleEdit(scope.row)\">编辑</el-button>\n            <el-button type=\"danger\" link @click=\"handleDelete(scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { getDeptTree, addDept, updateDept, deleteDept } from '@/api/dept'\n\n// 表格数据和状态\nconst deptList = ref([])\nconst loading = ref(false)\n\n// 获取部门树\nconst getList = async () => {\n  try {\n    loading.value = true\n    const res = await getDeptTree()\n    deptList.value = res.data || []\n  } catch (error) {\n    console.error('获取部门列表失败', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 新增部门\nconst handleAdd = () => {\n  ElMessage.info('新增部门功能待实现')\n}\n\n// 编辑部门\nconst handleEdit = (row) => {\n  ElMessage.info(`编辑部门: ${row.name}`)\n}\n\n// 删除部门\nconst handleDelete = (row) => {\n  ElMessageBox.confirm(`确定要删除部门 ${row.name} 吗?`, '提示', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning'\n  }).then(async () => {\n    try {\n      await deleteDept(row.id)\n      ElMessage.success('删除成功')\n      getList()\n    } catch (error) {\n      ElMessage.error('删除失败')\n    }\n  }).catch(() => {})\n}\n\n// 页面加载时获取数据\nonMounted(() => {\n  getList()\n})\n</script>\n\n<style scoped>\n.app-container {\n  padding: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n</style> "],"mappings":"AAmCA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAI;AACnC,SAASC,SAAS,EAAEC,YAAY,QAAQ,cAAa;AACrD,SAASC,WAAW,EAAEC,OAAO,EAAEC,UAAU,EAAEC,UAAU,QAAQ,YAAW;;AAExE;;;;;;;;IACA,MAAMC,QAAQ,GAAGR,GAAG,CAAC,EAAE;IACvB,MAAMS,OAAO,GAAGT,GAAG,CAAC,KAAK;;IAEzB;IACA,MAAMU,OAAO,GAAG,MAAAA,CAAA,KAAY;MAC1B,IAAI;QACFD,OAAO,CAACE,KAAK,GAAG,IAAG;QACnB,MAAMC,GAAG,GAAG,MAAMR,WAAW,CAAC;QAC9BI,QAAQ,CAACG,KAAK,GAAGC,GAAG,CAACC,IAAI,IAAI,EAAC;MAChC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,UAAU,EAAEA,KAAK;MACjC,CAAC,SAAS;QACRL,OAAO,CAACE,KAAK,GAAG,KAAI;MACtB;IACF;;IAEA;IACA,MAAMK,SAAS,GAAGA,CAAA,KAAM;MACtBd,SAAS,CAACe,IAAI,CAAC,WAAW;IAC5B;;IAEA;IACA,MAAMC,UAAU,GAAIC,GAAG,IAAK;MAC1BjB,SAAS,CAACe,IAAI,CAAC,SAASE,GAAG,CAACC,IAAI,EAAE;IACpC;;IAEA;IACA,MAAMC,YAAY,GAAIF,GAAG,IAAK;MAC5BhB,YAAY,CAACmB,OAAO,CAAC,WAAWH,GAAG,CAACC,IAAI,KAAK,EAAE,IAAI,EAAE;QACnDG,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBC,IAAI,EAAE;MACR,CAAC,CAAC,CAACC,IAAI,CAAC,YAAY;QAClB,IAAI;UACF,MAAMnB,UAAU,CAACY,GAAG,CAACQ,EAAE;UACvBzB,SAAS,CAAC0B,OAAO,CAAC,MAAM;UACxBlB,OAAO,CAAC;QACV,CAAC,CAAC,OAAOI,KAAK,EAAE;UACdZ,SAAS,CAACY,KAAK,CAAC,MAAM;QACxB;MACF,CAAC,CAAC,CAACe,KAAK,CAAC,MAAM,CAAC,CAAC;IACnB;;IAEA;IACA5B,SAAS,CAAC,MAAM;MACdS,OAAO,CAAC;IACV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}