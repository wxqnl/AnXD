{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, unref as _unref, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"common-layout\"\n};\nconst _hoisted_2 = {\n  class: \"header-left\"\n};\nconst _hoisted_3 = {\n  class: \"header-right\"\n};\nconst _hoisted_4 = {\n  class: \"user-info\"\n};\nimport { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ElMessageBox } from 'element-plus';\nimport { UserFilled } from '@element-plus/icons-vue';\nimport Breadcrumb from '../components/Breadcrumb.vue';\nexport default {\n  __name: 'Layout',\n  setup(__props) {\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n\n    // 获取用户信息\n    const userInfo = computed(() => store.state.user.userInfo);\n\n    // 侧边栏折叠状态\n    const isCollapse = ref(false);\n    const toggleSidebar = () => {\n      isCollapse.value = !isCollapse.value;\n    };\n\n    // 当前激活菜单\n    const activeMenu = computed(() => {\n      return route.path;\n    });\n\n    // 退出登录\n    const handleLogout = () => {\n      ElMessageBox.confirm('确定要退出登录吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        store.dispatch('user/logout');\n        router.push('/login');\n      }).catch(() => {});\n    };\n\n    // 页面加载时获取用户信息\n    onMounted(() => {\n      if (!userInfo.value) {\n        store.dispatch('user/getUserInfo').catch(() => {\n          router.push('/login');\n        });\n      }\n    });\n    return (_ctx, _cache) => {\n      const _component_Odometer = _resolveComponent(\"Odometer\");\n      const _component_el_icon = _resolveComponent(\"el-icon\");\n      const _component_el_menu_item = _resolveComponent(\"el-menu-item\");\n      const _component_Setting = _resolveComponent(\"Setting\");\n      const _component_el_sub_menu = _resolveComponent(\"el-sub-menu\");\n      const _component_Avatar = _resolveComponent(\"Avatar\");\n      const _component_ShoppingCart = _resolveComponent(\"ShoppingCart\");\n      const _component_Discount = _resolveComponent(\"Discount\");\n      const _component_el_menu = _resolveComponent(\"el-menu\");\n      const _component_el_aside = _resolveComponent(\"el-aside\");\n      const _component_el_avatar = _resolveComponent(\"el-avatar\");\n      const _component_CaretBottom = _resolveComponent(\"CaretBottom\");\n      const _component_el_dropdown_item = _resolveComponent(\"el-dropdown-item\");\n      const _component_el_dropdown_menu = _resolveComponent(\"el-dropdown-menu\");\n      const _component_el_dropdown = _resolveComponent(\"el-dropdown\");\n      const _component_el_header = _resolveComponent(\"el-header\");\n      const _component_router_view = _resolveComponent(\"router-view\");\n      const _component_el_main = _resolveComponent(\"el-main\");\n      const _component_el_container = _resolveComponent(\"el-container\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_container, null, {\n        default: _withCtx(() => [_createVNode(_component_el_aside, {\n          width: \"220px\"\n        }, {\n          default: _withCtx(() => [_cache[13] || (_cache[13] = _createElementVNode(\"div\", {\n            class: \"logo\"\n          }, \"代驾管理系统\", -1)), _createVNode(_component_el_menu, {\n            \"default-active\": activeMenu.value,\n            class: \"el-menu-vertical\",\n            \"background-color\": \"#304156\",\n            \"text-color\": \"#bfcbd9\",\n            \"active-text-color\": \"#409EFF\",\n            collapse: isCollapse.value,\n            router: \"\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_menu_item, {\n              index: \"/dashboard\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n                default: _withCtx(() => [_createVNode(_component_Odometer)]),\n                _: 1\n              }), _cache[0] || (_cache[0] = _createElementVNode(\"span\", null, \"欢迎页面\", -1))]),\n              _: 1\n            }), _createVNode(_component_el_sub_menu, {\n              index: \"1\"\n            }, {\n              title: _withCtx(() => [_createVNode(_component_el_icon, null, {\n                default: _withCtx(() => [_createVNode(_component_Setting)]),\n                _: 1\n              }), _cache[1] || (_cache[1] = _createElementVNode(\"span\", null, \"系统管理\", -1))]),\n              default: _withCtx(() => [_createVNode(_component_el_menu_item, {\n                index: \"/sysuser\"\n              }, {\n                default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"用户管理\")])),\n                _: 1\n              }), _createVNode(_component_el_menu_item, {\n                index: \"/sysrole\"\n              }, {\n                default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"角色管理\")])),\n                _: 1\n              }), _createVNode(_component_el_menu_item, {\n                index: \"/sysdept\"\n              }, {\n                default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"部门管理\")])),\n                _: 1\n              }), _createVNode(_component_el_menu_item, {\n                index: \"/syspost\"\n              }, {\n                default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"岗位管理\")])),\n                _: 1\n              })]),\n              _: 1\n            }), _createVNode(_component_el_sub_menu, {\n              index: \"2\"\n            }, {\n              title: _withCtx(() => [_createVNode(_component_el_icon, null, {\n                default: _withCtx(() => [_createVNode(_component_Avatar)]),\n                _: 1\n              }), _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"用户管理\", -1))]),\n              default: _withCtx(() => [_createVNode(_component_el_menu_item, {\n                index: \"/driver\"\n              }, {\n                default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"司机管理\")])),\n                _: 1\n              }), _createVNode(_component_el_menu_item, {\n                index: \"/customer\"\n              }, {\n                default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"客户管理\")])),\n                _: 1\n              })]),\n              _: 1\n            }), _createVNode(_component_el_sub_menu, {\n              index: \"3\"\n            }, {\n              title: _withCtx(() => [_createVNode(_component_el_icon, null, {\n                default: _withCtx(() => [_createVNode(_component_ShoppingCart)]),\n                _: 1\n              }), _cache[9] || (_cache[9] = _createElementVNode(\"span\", null, \"订单管理\", -1))]),\n              default: _withCtx(() => [_createVNode(_component_el_menu_item, {\n                index: \"/order\"\n              }, {\n                default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"订单列表\")])),\n                _: 1\n              }), _createVNode(_component_el_menu_item, {\n                index: \"/ordercomment\"\n              }, {\n                default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\"订单评价\")])),\n                _: 1\n              })]),\n              _: 1\n            }), _createVNode(_component_el_menu_item, {\n              index: \"/coupon\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n                default: _withCtx(() => [_createVNode(_component_Discount)]),\n                _: 1\n              }), _cache[12] || (_cache[12] = _createElementVNode(\"span\", null, \"优惠券管理\", -1))]),\n              _: 1\n            })]),\n            _: 1\n          }, 8, [\"default-active\", \"collapse\"])]),\n          _: 1\n        }), _createVNode(_component_el_container, null, {\n          default: _withCtx(() => [_createVNode(_component_el_header, null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_icon, {\n              class: \"menu-toggle\",\n              onClick: toggleSidebar\n            }, {\n              default: _withCtx(() => [(_openBlock(), _createBlock(_resolveDynamicComponent(isCollapse.value ? 'Expand' : 'Fold')))]),\n              _: 1\n            }), _createVNode(Breadcrumb)]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_dropdown, null, {\n              dropdown: _withCtx(() => [_createVNode(_component_el_dropdown_menu, null, {\n                default: _withCtx(() => [_createVNode(_component_el_dropdown_item, {\n                  onClick: handleLogout\n                }, {\n                  default: _withCtx(() => _cache[14] || (_cache[14] = [_createTextVNode(\"退出登录\")])),\n                  _: 1\n                })]),\n                _: 1\n              })]),\n              default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_4, [_createVNode(_component_el_avatar, {\n                icon: _unref(UserFilled),\n                size: \"small\"\n              }, null, 8, [\"icon\"]), _createTextVNode(\" \" + _toDisplayString(userInfo.value?.nickname || userInfo.value?.username || '管理员') + \" \", 1), _createVNode(_component_el_icon, null, {\n                default: _withCtx(() => [_createVNode(_component_CaretBottom)]),\n                _: 1\n              })])]),\n              _: 1\n            })])]),\n            _: 1\n          }), _createVNode(_component_el_main, null, {\n            default: _withCtx(() => [_createVNode(_component_router_view)]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      })]);\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","useRouter","useRoute","ElMessageBox","UserFilled","Breadcrumb","store","router","route","userInfo","state","user","isCollapse","toggleSidebar","value","activeMenu","path","handleLogout","confirm","confirmButtonText","cancelButtonText","type","then","dispatch","push","catch"],"sources":["D:/LIHAOZE/JavaStudyCode/frontui/frontui/src/pages/Layout.vue"],"sourcesContent":["<template>\n  <div class=\"common-layout\">\n    <el-container>\n      <el-aside width=\"220px\">\n        <div class=\"logo\">代驾管理系统</div>\n        <el-menu\n          :default-active=\"activeMenu\"\n          class=\"el-menu-vertical\"\n          background-color=\"#304156\"\n          text-color=\"#bfcbd9\"\n          active-text-color=\"#409EFF\"\n          :collapse=\"isCollapse\"\n          router\n        >\n          <el-menu-item index=\"/dashboard\">\n            <el-icon><Odometer /></el-icon>\n            <span>欢迎页面</span>\n          </el-menu-item>\n          \n          <el-sub-menu index=\"1\">\n            <template #title>\n              <el-icon><Setting /></el-icon>\n              <span>系统管理</span>\n            </template>\n            <el-menu-item index=\"/sysuser\">用户管理</el-menu-item>\n            <el-menu-item index=\"/sysrole\">角色管理</el-menu-item>\n            <el-menu-item index=\"/sysdept\">部门管理</el-menu-item>\n            <el-menu-item index=\"/syspost\">岗位管理</el-menu-item>\n          </el-sub-menu>\n\n          <el-sub-menu index=\"2\">\n            <template #title>\n              <el-icon><Avatar /></el-icon>\n              <span>用户管理</span>\n            </template>\n            <el-menu-item index=\"/driver\">司机管理</el-menu-item>\n            <el-menu-item index=\"/customer\">客户管理</el-menu-item>\n          </el-sub-menu>\n\n          <el-sub-menu index=\"3\">\n            <template #title>\n              <el-icon><ShoppingCart /></el-icon>\n              <span>订单管理</span>\n            </template>\n            <el-menu-item index=\"/order\">订单列表</el-menu-item>\n            <el-menu-item index=\"/ordercomment\">订单评价</el-menu-item>\n          </el-sub-menu>\n\n          <el-menu-item index=\"/coupon\">\n            <el-icon><Discount /></el-icon>\n            <span>优惠券管理</span>\n          </el-menu-item>\n        </el-menu>\n      </el-aside>\n      \n      <el-container>\n        <el-header>\n          <div class=\"header-left\">\n            <el-icon class=\"menu-toggle\" @click=\"toggleSidebar\">\n              <component :is=\"isCollapse ? 'Expand' : 'Fold'\" />\n            </el-icon>\n            <breadcrumb />\n          </div>\n          <div class=\"header-right\">\n            <el-dropdown>\n              <span class=\"user-info\">\n                <el-avatar :icon=\"UserFilled\" size=\"small\"></el-avatar>\n                {{ userInfo?.nickname || userInfo?.username || '管理员' }}\n                <el-icon><CaretBottom /></el-icon>\n              </span>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item @click=\"handleLogout\">退出登录</el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </div>\n        </el-header>\n        \n        <el-main>\n          <router-view />\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessageBox } from 'element-plus'\nimport { UserFilled } from '@element-plus/icons-vue'\nimport Breadcrumb from '../components/Breadcrumb.vue'\n\nconst store = useStore()\nconst router = useRouter()\nconst route = useRoute()\n\n// 获取用户信息\nconst userInfo = computed(() => store.state.user.userInfo)\n\n// 侧边栏折叠状态\nconst isCollapse = ref(false)\nconst toggleSidebar = () => {\n  isCollapse.value = !isCollapse.value\n}\n\n// 当前激活菜单\nconst activeMenu = computed(() => {\n  return route.path\n})\n\n// 退出登录\nconst handleLogout = () => {\n  ElMessageBox.confirm('确定要退出登录吗?', '提示', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning'\n  }).then(() => {\n    store.dispatch('user/logout')\n    router.push('/login')\n  }).catch(() => {})\n}\n\n// 页面加载时获取用户信息\nonMounted(() => {\n  if (!userInfo.value) {\n    store.dispatch('user/getUserInfo').catch(() => {\n      router.push('/login')\n    })\n  }\n})\n</script>\n\n<style scoped>\n.common-layout {\n  height: 100%;\n}\n\n.el-container {\n  height: 100%;\n}\n\n.el-aside {\n  background-color: #304156;\n  transition: width 0.3s;\n  overflow-x: hidden;\n}\n\n.el-menu {\n  border-right: none;\n}\n\n.logo {\n  height: 60px;\n  line-height: 60px;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  font-weight: bold;\n  background-color: #263445;\n}\n\n.el-header {\n  background-color: #fff;\n  color: #333;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n}\n\n.menu-toggle {\n  font-size: 20px;\n  cursor: pointer;\n  margin-right: 15px;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.avatar {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  margin-right: 10px;\n}\n\n.el-main {\n  background-color: #f0f2f5;\n  padding: 20px;\n}\n</style> "],"mappings":";;;;;;;;;;;;;AAwFA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAI;AAC7C,SAASC,QAAQ,QAAQ,MAAK;AAC9B,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAW;AAC/C,SAASC,YAAY,QAAQ,cAAa;AAC1C,SAASC,UAAU,QAAQ,yBAAwB;AACnD,OAAOC,UAAU,MAAM,8BAA6B;;;;IAEpD,MAAMC,KAAK,GAAGN,QAAQ,CAAC;IACvB,MAAMO,MAAM,GAAGN,SAAS,CAAC;IACzB,MAAMO,KAAK,GAAGN,QAAQ,CAAC;;IAEvB;IACA,MAAMO,QAAQ,GAAGX,QAAQ,CAAC,MAAMQ,KAAK,CAACI,KAAK,CAACC,IAAI,CAACF,QAAQ;;IAEzD;IACA,MAAMG,UAAU,GAAGf,GAAG,CAAC,KAAK;IAC5B,MAAMgB,aAAa,GAAGA,CAAA,KAAM;MAC1BD,UAAU,CAACE,KAAK,GAAG,CAACF,UAAU,CAACE,KAAI;IACrC;;IAEA;IACA,MAAMC,UAAU,GAAGjB,QAAQ,CAAC,MAAM;MAChC,OAAOU,KAAK,CAACQ,IAAG;IAClB,CAAC;;IAED;IACA,MAAMC,YAAY,GAAGA,CAAA,KAAM;MACzBd,YAAY,CAACe,OAAO,CAAC,WAAW,EAAE,IAAI,EAAE;QACtCC,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBC,IAAI,EAAE;MACR,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM;QACZhB,KAAK,CAACiB,QAAQ,CAAC,aAAa;QAC5BhB,MAAM,CAACiB,IAAI,CAAC,QAAQ;MACtB,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC,CAAC;IACnB;;IAEA;IACA1B,SAAS,CAAC,MAAM;MACd,IAAI,CAACU,QAAQ,CAACK,KAAK,EAAE;QACnBR,KAAK,CAACiB,QAAQ,CAAC,kBAAkB,CAAC,CAACE,KAAK,CAAC,MAAM;UAC7ClB,MAAM,CAACiB,IAAI,CAAC,QAAQ;QACtB,CAAC;MACH;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}