{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ElMessageBox } from 'element-plus';\nimport { UserFilled } from '@element-plus/icons-vue';\nimport Breadcrumb from '../components/Breadcrumb.vue';\nexport default {\n  __name: 'Layout',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n\n    // 获取用户信息\n    const userInfo = computed(() => store.state.user.userInfo);\n\n    // 侧边栏折叠状态\n    const isCollapse = ref(false);\n    const toggleSidebar = () => {\n      isCollapse.value = !isCollapse.value;\n    };\n\n    // 当前激活菜单\n    const activeMenu = computed(() => {\n      return route.path;\n    });\n\n    // 退出登录\n    const handleLogout = () => {\n      ElMessageBox.confirm('确定要退出登录吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        store.dispatch('user/logout');\n        router.push('/login');\n      }).catch(() => {});\n    };\n\n    // 页面加载时获取用户信息\n    onMounted(() => {\n      if (!userInfo.value) {\n        store.dispatch('user/getUserInfo').catch(() => {\n          router.push('/login');\n        });\n      }\n    });\n    const __returned__ = {\n      store,\n      router,\n      route,\n      userInfo,\n      isCollapse,\n      toggleSidebar,\n      activeMenu,\n      handleLogout,\n      ref,\n      computed,\n      onMounted,\n      get useStore() {\n        return useStore;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      get UserFilled() {\n        return UserFilled;\n      },\n      Breadcrumb\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","useRouter","useRoute","ElMessageBox","UserFilled","Breadcrumb","store","router","route","userInfo","state","user","isCollapse","toggleSidebar","value","activeMenu","path","handleLogout","confirm","confirmButtonText","cancelButtonText","type","then","dispatch","push","catch"],"sources":["/Users/apple/Desktop/111111/zongheshixi/daijiaguanli/frontui/src/pages/Layout.vue"],"sourcesContent":["<template>\n  <div class=\"common-layout\">\n    <el-container>\n      <el-aside width=\"220px\">\n        <div class=\"logo\">代驾管理系统</div>\n        <el-menu\n          :default-active=\"activeMenu\"\n          class=\"el-menu-vertical\"\n          background-color=\"#304156\"\n          text-color=\"#bfcbd9\"\n          active-text-color=\"#409EFF\"\n          :collapse=\"isCollapse\"\n          router\n        >\n          <el-menu-item index=\"/dashboard\">\n            <el-icon><Odometer /></el-icon>\n            <span>欢迎页面</span>\n          </el-menu-item>\n          \n          <el-sub-menu index=\"1\">\n            <template #title>\n              <el-icon><Setting /></el-icon>\n              <span>系统管理</span>\n            </template>\n            <el-menu-item index=\"/sysuser\">用户管理</el-menu-item>\n            <el-menu-item index=\"/sysrole\">角色管理</el-menu-item>\n            <el-menu-item index=\"/sysdept\">部门管理</el-menu-item>\n            <el-menu-item index=\"/syspost\">岗位管理</el-menu-item>\n          </el-sub-menu>\n\n          <el-sub-menu index=\"2\">\n            <template #title>\n              <el-icon><Avatar /></el-icon>\n              <span>用户管理</span>\n            </template>\n            <el-menu-item index=\"/driver\">司机管理</el-menu-item>\n            <el-menu-item index=\"/customer\">客户管理</el-menu-item>\n          </el-sub-menu>\n\n          <el-sub-menu index=\"3\">\n            <template #title>\n              <el-icon><ShoppingCart /></el-icon>\n              <span>订单管理</span>\n            </template>\n            <el-menu-item index=\"/order\">订单列表</el-menu-item>\n            <el-menu-item index=\"/ordercomment\">订单评价</el-menu-item>\n          </el-sub-menu>\n\n          <el-menu-item index=\"/coupon\">\n            <el-icon><Discount /></el-icon>\n            <span>优惠券管理</span>\n          </el-menu-item>\n        </el-menu>\n      </el-aside>\n      \n      <el-container>\n        <el-header>\n          <div class=\"header-left\">\n            <el-icon class=\"menu-toggle\" @click=\"toggleSidebar\">\n              <component :is=\"isCollapse ? 'Expand' : 'Fold'\" />\n            </el-icon>\n            <breadcrumb />\n          </div>\n          <div class=\"header-right\">\n            <el-dropdown>\n              <span class=\"user-info\">\n                <el-avatar :icon=\"UserFilled\" size=\"small\"></el-avatar>\n                {{ userInfo?.nickname || userInfo?.username || '管理员' }}\n                <el-icon><CaretBottom /></el-icon>\n              </span>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item @click=\"handleLogout\">退出登录</el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </div>\n        </el-header>\n        \n        <el-main>\n          <router-view />\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessageBox } from 'element-plus'\nimport { UserFilled } from '@element-plus/icons-vue'\nimport Breadcrumb from '../components/Breadcrumb.vue'\n\nconst store = useStore()\nconst router = useRouter()\nconst route = useRoute()\n\n// 获取用户信息\nconst userInfo = computed(() => store.state.user.userInfo)\n\n// 侧边栏折叠状态\nconst isCollapse = ref(false)\nconst toggleSidebar = () => {\n  isCollapse.value = !isCollapse.value\n}\n\n// 当前激活菜单\nconst activeMenu = computed(() => {\n  return route.path\n})\n\n// 退出登录\nconst handleLogout = () => {\n  ElMessageBox.confirm('确定要退出登录吗?', '提示', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning'\n  }).then(() => {\n    store.dispatch('user/logout')\n    router.push('/login')\n  }).catch(() => {})\n}\n\n// 页面加载时获取用户信息\nonMounted(() => {\n  if (!userInfo.value) {\n    store.dispatch('user/getUserInfo').catch(() => {\n      router.push('/login')\n    })\n  }\n})\n</script>\n\n<style scoped>\n.common-layout {\n  height: 100%;\n}\n\n.el-container {\n  height: 100%;\n}\n\n.el-aside {\n  background-color: #304156;\n  transition: width 0.3s;\n  overflow-x: hidden;\n}\n\n.el-menu {\n  border-right: none;\n}\n\n.logo {\n  height: 60px;\n  line-height: 60px;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  font-weight: bold;\n  background-color: #263445;\n}\n\n.el-header {\n  background-color: #fff;\n  color: #333;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n}\n\n.menu-toggle {\n  font-size: 20px;\n  cursor: pointer;\n  margin-right: 15px;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.avatar {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  margin-right: 10px;\n}\n\n.el-main {\n  background-color: #f0f2f5;\n  padding: 20px;\n}\n</style> "],"mappings":"AAwFA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAI;AAC7C,SAASC,QAAQ,QAAQ,MAAK;AAC9B,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAW;AAC/C,SAASC,YAAY,QAAQ,cAAa;AAC1C,SAASC,UAAU,QAAQ,yBAAwB;AACnD,OAAOC,UAAU,MAAM,8BAA6B;;;;;;;IAEpD,MAAMC,KAAK,GAAGN,QAAQ,CAAC;IACvB,MAAMO,MAAM,GAAGN,SAAS,CAAC;IACzB,MAAMO,KAAK,GAAGN,QAAQ,CAAC;;IAEvB;IACA,MAAMO,QAAQ,GAAGX,QAAQ,CAAC,MAAMQ,KAAK,CAACI,KAAK,CAACC,IAAI,CAACF,QAAQ;;IAEzD;IACA,MAAMG,UAAU,GAAGf,GAAG,CAAC,KAAK;IAC5B,MAAMgB,aAAa,GAAGA,CAAA,KAAM;MAC1BD,UAAU,CAACE,KAAK,GAAG,CAACF,UAAU,CAACE,KAAI;IACrC;;IAEA;IACA,MAAMC,UAAU,GAAGjB,QAAQ,CAAC,MAAM;MAChC,OAAOU,KAAK,CAACQ,IAAG;IAClB,CAAC;;IAED;IACA,MAAMC,YAAY,GAAGA,CAAA,KAAM;MACzBd,YAAY,CAACe,OAAO,CAAC,WAAW,EAAE,IAAI,EAAE;QACtCC,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBC,IAAI,EAAE;MACR,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM;QACZhB,KAAK,CAACiB,QAAQ,CAAC,aAAa;QAC5BhB,MAAM,CAACiB,IAAI,CAAC,QAAQ;MACtB,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC,CAAC;IACnB;;IAEA;IACA1B,SAAS,CAAC,MAAM;MACd,IAAI,CAACU,QAAQ,CAACK,KAAK,EAAE;QACnBR,KAAK,CAACiB,QAAQ,CAAC,kBAAkB,CAAC,CAACE,KAAK,CAAC,MAAM;UAC7ClB,MAAM,CAACiB,IAAI,CAAC,QAAQ;QACtB,CAAC;MACH;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}