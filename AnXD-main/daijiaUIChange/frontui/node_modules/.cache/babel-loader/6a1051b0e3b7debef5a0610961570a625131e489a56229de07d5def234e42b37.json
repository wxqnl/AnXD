{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { getMenuTree, addMenu, updateMenu, deleteMenu } from '@/api/menu';\n\n// 表格数据和状态\n\nexport default {\n  __name: 'SysMenu',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const menuList = ref([]);\n    const loading = ref(false);\n\n    // 获取菜单树\n    const getList = async () => {\n      try {\n        loading.value = true;\n\n        // 尝试从API获取，如果失败则使用模拟数据\n        try {\n          const res = await getMenuTree();\n          console.log('菜单树响应:', res);\n          if (res && res.data) {\n            menuList.value = res.data;\n            return;\n          }\n        } catch (error) {\n          console.error('从API获取菜单数据失败，使用模拟数据', error);\n        }\n\n        // 模拟数据\n        menuList.value = [{\n          id: 1,\n          name: '系统管理',\n          path: '/system',\n          component: 'Layout',\n          icon: 'Setting',\n          orderNum: 1,\n          status: 1,\n          children: [{\n            id: 2,\n            name: '用户管理',\n            path: '/sysuser',\n            component: 'system/SysUser',\n            icon: 'User',\n            orderNum: 1,\n            status: 1\n          }, {\n            id: 3,\n            name: '角色管理',\n            path: '/sysrole',\n            component: 'system/SysRole',\n            icon: 'UserFilled',\n            orderNum: 2,\n            status: 1\n          }, {\n            id: 4,\n            name: '菜单管理',\n            path: '/sysmenu',\n            component: 'system/SysMenu',\n            icon: 'Menu',\n            orderNum: 3,\n            status: 1\n          }, {\n            id: 5,\n            name: '部门管理',\n            path: '/sysdept',\n            component: 'system/SysDept',\n            icon: 'OfficeBuilding',\n            orderNum: 4,\n            status: 1\n          }, {\n            id: 6,\n            name: '岗位管理',\n            path: '/syspost',\n            component: 'system/SysPost',\n            icon: 'Briefcase',\n            orderNum: 5,\n            status: 1\n          }]\n        }, {\n          id: 7,\n          name: '用户管理',\n          path: '/user',\n          component: 'Layout',\n          icon: 'Avatar',\n          orderNum: 2,\n          status: 1,\n          children: [{\n            id: 8,\n            name: '司机管理',\n            path: '/driver',\n            component: 'driver/DriverInfo',\n            icon: 'User',\n            orderNum: 1,\n            status: 1\n          }, {\n            id: 9,\n            name: '客户管理',\n            path: '/customer',\n            component: 'customer/CustomerInfo',\n            icon: 'User',\n            orderNum: 2,\n            status: 1\n          }]\n        }, {\n          id: 10,\n          name: '订单管理',\n          path: '/order-manage',\n          component: 'Layout',\n          icon: 'ShoppingCart',\n          orderNum: 3,\n          status: 1,\n          children: [{\n            id: 11,\n            name: '订单列表',\n            path: '/order',\n            component: 'order/OrderInfo',\n            icon: 'Document',\n            orderNum: 1,\n            status: 1\n          }, {\n            id: 12,\n            name: '订单评价',\n            path: '/ordercomment',\n            component: 'order/OrderComment',\n            icon: 'ChatDotRound',\n            orderNum: 2,\n            status: 1\n          }]\n        }, {\n          id: 13,\n          name: '优惠券管理',\n          path: '/coupon',\n          component: 'coupon/Coupon',\n          icon: 'Discount',\n          orderNum: 4,\n          status: 1\n        }];\n      } catch (error) {\n        console.error('获取菜单列表失败', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 新增菜单\n    const handleAdd = () => {\n      ElMessage.info('新增菜单功能待实现');\n    };\n\n    // 编辑菜单\n    const handleEdit = row => {\n      ElMessage.info(`编辑菜单: ${row.name}`);\n    };\n\n    // 删除菜单\n    const handleDelete = row => {\n      ElMessageBox.confirm(`确定要删除菜单 ${row.name} 吗?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          // 仅模拟删除过程\n          ElMessage.success('删除成功');\n          getList();\n        } catch (error) {\n          ElMessage.error('删除失败');\n        }\n      }).catch(() => {});\n    };\n\n    // 页面加载时获取数据\n    onMounted(() => {\n      getList();\n    });\n    const __returned__ = {\n      menuList,\n      loading,\n      getList,\n      handleAdd,\n      handleEdit,\n      handleDelete,\n      ref,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      get getMenuTree() {\n        return getMenuTree;\n      },\n      get addMenu() {\n        return addMenu;\n      },\n      get updateMenu() {\n        return updateMenu;\n      },\n      get deleteMenu() {\n        return deleteMenu;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","ElMessageBox","getMenuTree","addMenu","updateMenu","deleteMenu","menuList","loading","getList","value","res","console","log","data","error","id","name","path","component","icon","orderNum","status","children","handleAdd","info","handleEdit","row","handleDelete","confirm","confirmButtonText","cancelButtonText","type","then","success","catch"],"sources":["/Users/apple/Desktop/111111/zongheshixi/daijiaguanli/frontui/src/pages/system/SysMenu.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card>\n      <template #header>\n        <div class=\"card-header\">\n          <span>菜单管理</span>\n          <el-button type=\"primary\" @click=\"handleAdd\">新增菜单</el-button>\n        </div>\n      </template>\n      \n      <el-table v-loading=\"loading\" :data=\"menuList\" row-key=\"id\" border :tree-props=\"{ children: 'children' }\">\n        <el-table-column prop=\"name\" label=\"菜单名称\" />\n        <el-table-column prop=\"path\" label=\"路由地址\" />\n        <el-table-column prop=\"component\" label=\"组件路径\" />\n        <el-table-column prop=\"icon\" label=\"图标\">\n          <template #default=\"scope\">\n            <el-icon v-if=\"scope.row.icon\">\n              <component :is=\"scope.row.icon\"></component>\n            </el-icon>\n            <span v-else>-</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"orderNum\" label=\"排序\" width=\"80\" />\n        <el-table-column prop=\"status\" label=\"状态\" width=\"80\">\n          <template #default=\"scope\">\n            <el-tag :type=\"scope.row.status === 1 ? 'success' : 'danger'\">\n              {{ scope.row.status === 1 ? '正常' : '停用' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"200\">\n          <template #default=\"scope\">\n            <el-button type=\"primary\" link @click=\"handleEdit(scope.row)\">编辑</el-button>\n            <el-button type=\"danger\" link @click=\"handleDelete(scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { getMenuTree, addMenu, updateMenu, deleteMenu } from '@/api/menu'\n\n// 表格数据和状态\nconst menuList = ref([])\nconst loading = ref(false)\n\n// 获取菜单树\nconst getList = async () => {\n  try {\n    loading.value = true\n    \n    // 尝试从API获取，如果失败则使用模拟数据\n    try {\n      const res = await getMenuTree()\n      console.log('菜单树响应:', res)\n      if (res && res.data) {\n        menuList.value = res.data\n        return\n      }\n    } catch (error) {\n      console.error('从API获取菜单数据失败，使用模拟数据', error)\n    }\n    \n    // 模拟数据\n    menuList.value = [\n      {\n        id: 1,\n        name: '系统管理',\n        path: '/system',\n        component: 'Layout',\n        icon: 'Setting',\n        orderNum: 1,\n        status: 1,\n        children: [\n          {\n            id: 2,\n            name: '用户管理',\n            path: '/sysuser',\n            component: 'system/SysUser',\n            icon: 'User',\n            orderNum: 1,\n            status: 1\n          },\n          {\n            id: 3,\n            name: '角色管理',\n            path: '/sysrole',\n            component: 'system/SysRole',\n            icon: 'UserFilled',\n            orderNum: 2,\n            status: 1\n          },\n          {\n            id: 4,\n            name: '菜单管理',\n            path: '/sysmenu',\n            component: 'system/SysMenu',\n            icon: 'Menu',\n            orderNum: 3,\n            status: 1\n          },\n          {\n            id: 5,\n            name: '部门管理',\n            path: '/sysdept',\n            component: 'system/SysDept',\n            icon: 'OfficeBuilding',\n            orderNum: 4,\n            status: 1\n          },\n          {\n            id: 6,\n            name: '岗位管理',\n            path: '/syspost',\n            component: 'system/SysPost',\n            icon: 'Briefcase',\n            orderNum: 5,\n            status: 1\n          }\n        ]\n      },\n      {\n        id: 7,\n        name: '用户管理',\n        path: '/user',\n        component: 'Layout',\n        icon: 'Avatar',\n        orderNum: 2,\n        status: 1,\n        children: [\n          {\n            id: 8,\n            name: '司机管理',\n            path: '/driver',\n            component: 'driver/DriverInfo',\n            icon: 'User',\n            orderNum: 1,\n            status: 1\n          },\n          {\n            id: 9,\n            name: '客户管理',\n            path: '/customer',\n            component: 'customer/CustomerInfo',\n            icon: 'User',\n            orderNum: 2,\n            status: 1\n          }\n        ]\n      },\n      {\n        id: 10,\n        name: '订单管理',\n        path: '/order-manage',\n        component: 'Layout',\n        icon: 'ShoppingCart',\n        orderNum: 3,\n        status: 1,\n        children: [\n          {\n            id: 11,\n            name: '订单列表',\n            path: '/order',\n            component: 'order/OrderInfo',\n            icon: 'Document',\n            orderNum: 1,\n            status: 1\n          },\n          {\n            id: 12,\n            name: '订单评价',\n            path: '/ordercomment',\n            component: 'order/OrderComment',\n            icon: 'ChatDotRound',\n            orderNum: 2,\n            status: 1\n          }\n        ]\n      },\n      {\n        id: 13,\n        name: '优惠券管理',\n        path: '/coupon',\n        component: 'coupon/Coupon',\n        icon: 'Discount',\n        orderNum: 4,\n        status: 1\n      }\n    ]\n  } catch (error) {\n    console.error('获取菜单列表失败', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 新增菜单\nconst handleAdd = () => {\n  ElMessage.info('新增菜单功能待实现')\n}\n\n// 编辑菜单\nconst handleEdit = (row) => {\n  ElMessage.info(`编辑菜单: ${row.name}`)\n}\n\n// 删除菜单\nconst handleDelete = (row) => {\n  ElMessageBox.confirm(`确定要删除菜单 ${row.name} 吗?`, '提示', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning'\n  }).then(async () => {\n    try {\n      // 仅模拟删除过程\n      ElMessage.success('删除成功')\n      getList()\n    } catch (error) {\n      ElMessage.error('删除失败')\n    }\n  }).catch(() => {})\n}\n\n// 页面加载时获取数据\nonMounted(() => {\n  getList()\n})\n</script>\n\n<style scoped>\n.app-container {\n  padding: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}