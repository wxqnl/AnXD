{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    class: \"login-card\"\n  }, {\n    default: _withCtx(() => [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n      class: \"title\"\n    }, [_createElementVNode(\"h2\", null, \"代驾管理系统\")], -1 /* HOISTED */)), _createVNode(_component_el_form, {\n      model: $setup.loginForm,\n      rules: $setup.loginRules,\n      ref: \"loginFormRef\",\n      class: \"login-form\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        prop: \"username\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.loginForm.username,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loginForm.username = $event),\n          \"prefix-icon\": \"User\",\n          placeholder: \"请输入用户名\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        prop: \"password\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.loginForm.password,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.loginForm.password = $event),\n          \"prefix-icon\": \"Lock\",\n          type: \"password\",\n          placeholder: \"请输入密码\",\n          \"show-password\": \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          class: \"login-button\",\n          loading: $setup.loading,\n          onClick: $setup.handleLogin\n        }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"登录\")])),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"loading\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","default","_withCtx","_createElementVNode","_component_el_form","model","$setup","loginForm","rules","loginRules","ref","_component_el_form_item","prop","_component_el_input","modelValue","username","_cache","$event","placeholder","_","password","type","_component_el_button","loading","onClick","handleLogin","_createTextVNode"],"sources":["D:\\LIHAOZE\\JavaStudyCode\\frontui\\frontui\\src\\pages\\Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-card class=\"login-card\">\n      <div class=\"title\">\n        <h2>代驾管理系统</h2>\n      </div>\n      <el-form :model=\"loginForm\" :rules=\"loginRules\" ref=\"loginFormRef\" class=\"login-form\">\n        <el-form-item prop=\"username\">\n          <el-input v-model=\"loginForm.username\" prefix-icon=\"User\" placeholder=\"请输入用户名\" />\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input v-model=\"loginForm.password\" prefix-icon=\"Lock\" type=\"password\" placeholder=\"请输入密码\" show-password />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" class=\"login-button\" :loading=\"loading\" @click=\"handleLogin\">登录</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessage } from 'element-plus'\n\n// 创建表单引用\nconst loginFormRef = ref(null)\n// 使用store\nconst store = useStore()\n// 使用路由\nconst router = useRouter()\nconst route = useRoute()\n\n// 登录表单数据\nconst loginForm = reactive({\n  username: '',\n  password: ''\n})\n\n// 表单验证规则\nconst loginRules = {\n  username: [\n    { required: true, message: '请输入用户名', trigger: 'blur' },\n    { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n  ],\n  password: [\n    { required: true, message: '请输入密码', trigger: 'blur' },\n    { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n  ]\n}\n\n// 登录状态\nconst loading = ref(false)\n\n// 登录处理\nconst handleLogin = async () => {\n  // 验证表单\n  if (!loginFormRef.value) return\n  \n  await loginFormRef.value.validate(async (valid) => {\n    if (valid) {\n      try {\n        loading.value = true\n        await store.dispatch('user/login', loginForm)\n        await store.dispatch('user/getUserInfo')\n        \n        ElMessage({\n          message: '登录成功',\n          type: 'success'\n        })\n        \n        // 重定向到首页或之前尝试访问的页面\n        router.push(route.query.redirect || '/')\n      } catch (error) {\n        ElMessage.error(error.message || '登录失败，请重试')\n      } finally {\n        loading.value = false\n      }\n    } else {\n      return false\n    }\n  })\n}\n</script>\n\n<style scoped>\n.login-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  background-color: #f0f2f5;\n}\n\n.login-card {\n  width: 400px;\n  padding: 20px 30px;\n  border-radius: 8px;\n}\n\n.title {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.title h2 {\n  font-weight: 600;\n  color: #409EFF;\n  margin: 0;\n}\n\n.login-form {\n  margin-top: 30px;\n}\n\n.login-button {\n  width: 100%;\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;;;;;;uBAA5BC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJC,YAAA,CAeUC,kBAAA;IAfDJ,KAAK,EAAC;EAAY;IAF/BK,OAAA,EAAAC,QAAA,CAGM,MAEM,C,0BAFNC,mBAAA,CAEM;MAFDP,KAAK,EAAC;IAAO,IAChBO,mBAAA,CAAe,YAAX,QAAM,E,sBAEZJ,YAAA,CAUUK,kBAAA;MAVAC,KAAK,EAAEC,MAAA,CAAAC,SAAS;MAAGC,KAAK,EAAEF,MAAA,CAAAG,UAAU;MAAEC,GAAG,EAAC,cAAc;MAACd,KAAK,EAAC;;MAN/EK,OAAA,EAAAC,QAAA,CAOQ,MAEe,CAFfH,YAAA,CAEeY,uBAAA;QAFDC,IAAI,EAAC;MAAU;QAPrCX,OAAA,EAAAC,QAAA,CAQU,MAAiF,CAAjFH,YAAA,CAAiFc,mBAAA;UAR3FC,UAAA,EAQ6BR,MAAA,CAAAC,SAAS,CAACQ,QAAQ;UAR/C,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAQ6BX,MAAA,CAAAC,SAAS,CAACQ,QAAQ,GAAAE,MAAA;UAAE,aAAW,EAAC,MAAM;UAACC,WAAW,EAAC;;QARhFC,CAAA;UAUQpB,YAAA,CAEeY,uBAAA;QAFDC,IAAI,EAAC;MAAU;QAVrCX,OAAA,EAAAC,QAAA,CAWU,MAA8G,CAA9GH,YAAA,CAA8Gc,mBAAA;UAXxHC,UAAA,EAW6BR,MAAA,CAAAC,SAAS,CAACa,QAAQ;UAX/C,uBAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAW6BX,MAAA,CAAAC,SAAS,CAACa,QAAQ,GAAAH,MAAA;UAAE,aAAW,EAAC,MAAM;UAACI,IAAI,EAAC,UAAU;UAACH,WAAW,EAAC,OAAO;UAAC,eAAa,EAAb;;QAXxGC,CAAA;UAaQpB,YAAA,CAEeY,uBAAA;QAfvBV,OAAA,EAAAC,QAAA,CAcU,MAAqG,CAArGH,YAAA,CAAqGuB,oBAAA;UAA1FD,IAAI,EAAC,SAAS;UAACzB,KAAK,EAAC,cAAc;UAAE2B,OAAO,EAAEjB,MAAA,CAAAiB,OAAO;UAAGC,OAAK,EAAElB,MAAA,CAAAmB;;UAdpFxB,OAAA,EAAAC,QAAA,CAciG,MAAEc,MAAA,QAAAA,MAAA,OAdnGU,gBAAA,CAciG,IAAE,E;UAdnGP,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}