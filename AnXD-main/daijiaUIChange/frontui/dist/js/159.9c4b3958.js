"use strict";(self["webpackChunkdaijia_admin"]=self["webpackChunkdaijia_admin"]||[]).push([[159],{159:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var t=l(6768),o=l(4232),d=l(144),u=l(1219),r=l(2933),s=l(7780);const n={class:"app-container"},i={class:"card-header"},p={class:"dialog-footer"},c={__name:"SysPost",setup(e){const a=(0,d.Kh)({pageNum:1,pageSize:10,name:"",postCode:"",status:void 0}),l=(0,d.KR)([]),c=(0,d.KR)(!1),m=(0,d.KR)(0),b=(0,d.KR)(!1),g=(0,d.KR)(""),k=(0,d.KR)(null),f=(0,d.Kh)({id:void 0,name:"",postCode:"",status:1,description:""}),F={name:[{required:!0,message:"请输入岗位名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],postCode:[{required:!0,message:"请输入岗位编码",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],description:[{max:200,message:"长度不能超过 200 个字符",trigger:"blur"}]},y=async()=>{try{c.value=!0;const e=await(0,s.F4)(a);console.log("岗位列表响应:",e),l.value=e.data.items||[],m.value=e.data.total||0}catch(e){console.error("获取岗位列表失败",e)}finally{c.value=!1}},v=()=>{a.pageNum=1,y()},_=()=>{a.name="",a.postCode="",a.status=void 0,a.pageNum=1,y()},h=()=>{f.id=void 0,f.name="",f.postCode="",f.status=1,f.description="",(0,t.dY)((()=>{k.value?.resetFields()}))},C=()=>{h(),g.value="新增岗位",b.value=!0},V=async e=>{h(),g.value="编辑岗位",b.value=!0;try{const a=await(0,s.tY)(e.id);a.data&&Object.assign(f,a.data)}catch(a){u.nk.error("获取岗位信息失败")}},w=e=>{r.s.confirm(`确定要删除岗位 ${e.name} 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{await(0,s.ys)(e.id),u.nk.success("删除成功"),y()}catch(a){u.nk.error("删除失败")}})).catch((()=>{}))},W=()=>{b.value=!1,h()},x=async()=>{k.value.validate((async e=>{if(e)try{f.id?(await(0,s.gg)(f),u.nk.success("修改岗位成功")):(await(0,s.SD)(f),u.nk.success("新增岗位成功")),b.value=!1,y()}catch(a){console.error("操作失败",a),u.nk.error("操作失败，请稍后重试")}}))},z=e=>{a.pageSize=e,y()},K=e=>{a.pageNum=e,y()};return(0,t.sV)((()=>{y()})),(e,d)=>{const u=(0,t.g2)("el-input"),r=(0,t.g2)("el-form-item"),s=(0,t.g2)("el-option"),y=(0,t.g2)("el-select"),h=(0,t.g2)("el-button"),U=(0,t.g2)("el-form"),R=(0,t.g2)("el-card"),S=(0,t.g2)("el-table-column"),A=(0,t.g2)("el-tag"),N=(0,t.g2)("el-table"),P=(0,t.g2)("el-pagination"),j=(0,t.g2)("el-radio"),q=(0,t.g2)("el-radio-group"),B=(0,t.g2)("el-dialog"),L=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(R,{class:"search-card"},{default:(0,t.k6)((()=>[(0,t.bF)(U,{model:a,ref:"queryForm",inline:!0,class:"search-form"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{label:"岗位名称",prop:"name"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:a.name,"onUpdate:modelValue":d[0]||(d[0]=e=>a.name=e),placeholder:"请输入岗位名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:"岗位编码",prop:"postCode"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:a.postCode,"onUpdate:modelValue":d[1]||(d[1]=e=>a.postCode=e),placeholder:"请输入岗位编码",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:"状态",prop:"status"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:a.status,"onUpdate:modelValue":d[2]||(d[2]=e=>a.status=e),placeholder:"请选择状态",clearable:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"正常",value:1}),(0,t.bF)(s,{label:"停用",value:0})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(h,{type:"primary",onClick:v},{default:(0,t.k6)((()=>d[8]||(d[8]=[(0,t.eW)("查询")]))),_:1}),(0,t.bF)(h,{onClick:_},{default:(0,t.k6)((()=>d[9]||(d[9]=[(0,t.eW)("重置")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),(0,t.bF)(R,null,{header:(0,t.k6)((()=>[(0,t.Lk)("div",i,[d[11]||(d[11]=(0,t.Lk)("span",null,"岗位列表",-1)),(0,t.bF)(h,{type:"primary",onClick:C},{default:(0,t.k6)((()=>d[10]||(d[10]=[(0,t.eW)("新增岗位")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(N,{data:l.value,border:""},{default:(0,t.k6)((()=>[(0,t.bF)(S,{type:"index",label:"#",width:"50"}),(0,t.bF)(S,{prop:"name",label:"岗位名称"}),(0,t.bF)(S,{prop:"postCode",label:"岗位编码"}),(0,t.bF)(S,{prop:"status",label:"状态",width:"80"},{default:(0,t.k6)((e=>[(0,t.bF)(A,{type:1===e.row.status?"success":"danger"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(1===e.row.status?"正常":"停用"),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(S,{prop:"description",label:"描述"}),(0,t.bF)(S,{label:"操作",width:"200"},{default:(0,t.k6)((e=>[(0,t.bF)(h,{type:"primary",link:"",onClick:a=>V(e.row)},{default:(0,t.k6)((()=>d[12]||(d[12]=[(0,t.eW)("编辑")]))),_:2},1032,["onClick"]),(0,t.bF)(h,{type:"danger",link:"",onClick:a=>w(e.row)},{default:(0,t.k6)((()=>d[13]||(d[13]=[(0,t.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[L,c.value]]),m.value>0?((0,t.uX)(),(0,t.Wv)(P,{key:0,"current-page":a.pageNum,"page-size":a.pageSize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:m.value,onSizeChange:z,onCurrentChange:K},null,8,["current-page","page-size","total"])):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(B,{title:g.value,modelValue:b.value,"onUpdate:modelValue":d[7]||(d[7]=e=>b.value=e),width:"500px","append-to-body":"","close-on-click-modal":!1},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",p,[(0,t.bF)(h,{onClick:W},{default:(0,t.k6)((()=>d[16]||(d[16]=[(0,t.eW)("取 消")]))),_:1}),(0,t.bF)(h,{type:"primary",onClick:x},{default:(0,t.k6)((()=>d[17]||(d[17]=[(0,t.eW)("确 定")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.bF)(U,{ref_key:"postFormRef",ref:k,model:f,rules:F,"label-width":"80px"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{label:"岗位名称",prop:"name"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:f.name,"onUpdate:modelValue":d[3]||(d[3]=e=>f.name=e),placeholder:"请输入岗位名称"},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:"岗位编码",prop:"postCode"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:f.postCode,"onUpdate:modelValue":d[4]||(d[4]=e=>f.postCode=e),placeholder:"请输入岗位编码"},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:"状态",prop:"status"},{default:(0,t.k6)((()=>[(0,t.bF)(q,{modelValue:f.status,"onUpdate:modelValue":d[5]||(d[5]=e=>f.status=e)},{default:(0,t.k6)((()=>[(0,t.bF)(j,{label:1},{default:(0,t.k6)((()=>d[14]||(d[14]=[(0,t.eW)("正常")]))),_:1}),(0,t.bF)(j,{label:0},{default:(0,t.k6)((()=>d[15]||(d[15]=[(0,t.eW)("停用")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:"描述",prop:"description"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:f.description,"onUpdate:modelValue":d[6]||(d[6]=e=>f.description=e),type:"textarea",placeholder:"请输入描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}};var m=l(1241);const b=(0,m.A)(c,[["__scopeId","data-v-59722760"]]),g=b},7780:(e,a,l)=>{l.d(a,{F4:()=>o,SD:()=>u,gg:()=>r,tY:()=>d,ys:()=>s});var t=l(5720);function o(e){return(0,t.A)({url:"/sysPost/list",method:"get",params:e})}function d(e){return(0,t.A)({url:"/sysPost/getById",method:"get",params:{id:e}})}function u(e){return(0,t.A)({url:"/sysPost/add",method:"post",data:e})}function r(e){return(0,t.A)({url:"/sysPost/update",method:"post",data:e})}function s(e){return(0,t.A)({url:"/sysPost/delete",method:"post",params:{id:e}})}}}]);
//# sourceMappingURL=159.9c4b3958.js.map